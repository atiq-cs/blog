

<!DOCTYPE HTML>
<!--
	Solid State by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Notes from Atiq - Multi-threaded Windows C&#x2B;&#x2B; Application &#x2013; Check Window Handle before Updating Child Items</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="/assets/sass/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="/assets/sass/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="/assets/sass/ie8.css" /><![endif]-->
        

	</head>
	<body>

		<!-- Page Wrapper -->
			<div id="page-wrapper">
				
				<!-- Header -->
				<header id="header">
					<h1><a href="/">Notes from Atiq</a></h1>
					<nav>
						<a href="#menu">Menu</a>
					</nav>
				</header>

				<!-- Menu -->
				<nav id="menu">
					<div class="inner">
						<h2>Menu</h2>
						<ul class="links">
							        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About Me</a></li>

						</ul>
						<a href="#" class="close">Close</a>
					</div>
				</nav>


    
<section id="banner">
  <div class="inner">
    <h2>Multi-threaded Windows C&#x2B;&#x2B; Application &#x2013; Check Window Handle before Updating Child Items</h2>
            <p><em>Published on Friday, July 8, 2011</em></p>
                    <a role="button" href="/tags/C&#x2B;&#x2B;" class="button small">C&#x2B;&#x2B;</a>
                <a role="button" href="/tags/MFC" class="button small">MFC</a>
                <a role="button" href="/tags/windows-programming" class="button small">windows programming</a>
  </div>
</section>

				<!-- Main -->
				<section id="wrapper">
					<section class="wrapper style2">
						<div class="inner">
							

<p>In an MFC Application, you might use a thread to update some control of a dialog box or Window. Now, while this application is running, user may press any of the buttons for example, OK, Cancel or simply close the Windows or Dialog without performing any of the options while your thread is still performing some background operation. After the operation is complete it tries to update Windows/Dialog. In the meantime, because user has already closed the Window an attempt to update the interface will cause application to crash due to invalid handle.</p>
<p>Windows will report the crash with a dialog box that your application has stopped working.</p>
<p>To ensure this does not happen for a Windows App you need to check whether that dialog box window really exists before updating it. To do that we use <code>IsWindow</code> function and pass the Windows Handle Pointer. The function we use here to update some text control in the Window/Dialog is <code>SetDlgItemText</code> Here's an example,</p>
<pre><code>int res = PerformSomeTask(param);

if (res == 0) {
    if (::IsWindow(ts-&gt;_this-&gt;m_hWnd) == TRUE) {  // ts is thread structure
        SetDlgItemText(IDC_CHECKNOTIFY, _T(&quot;Service is not available&quot;));    // IDC_CHECKNOTIFY is a static text control
    }
}
else {
    if (::IsWindow(ts-&gt;_this-&gt;m_hWnd) == TRUE)
        SetDlgItemText(IDC_CHECKNOTIFY, _T(&quot;Service is available&quot;));
}
</code></pre>



						</div>
					</section>
				
				</section>
				
				<!-- Footer -->
                <footer id="footer">
                    <div class="inner">
    <section>
            <h2>Feeds</h2>
            <ul class="actions">
                <li><a href="/feed.rss" class="button small"><i class="fa fa-rss"></i> RSS Feed</a></li>
                                <li><a href="/feed.atom" class="button small"><i class="fa fa-rss"></i> Atom Feed</a></li>
            </ul>
    </section>
    <section>
    </section>
    <ul class="copyright">
        <li>Copyright © 2020</li>
        <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
        <li><a href="https://wyam.io">Generated by Wyam</a></li>
    </ul>
</div>
                </footer>
			</div>

		<!-- Scripts -->
			<script src="/assets/js/skel.min.js"></script>
			<script src="/assets/js/jquery.min.js"></script>
			<script src="/assets/js/jquery.scrollex.min.js"></script>
			<script src="/assets/js/util.js"></script>
            <!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
            <script src="/assets/js/main.js"></script>

	</body>

</html>